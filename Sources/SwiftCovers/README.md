
## What's in this folder

The Swift source files in this folder are not compiled as part of the SwiftGodot library.

`Generator` (the thing that reads `extension_api.json` and spits out a zillion Swift source files) parses the Swift source files in this directory and extracts method bodies. It copies those method bodies into the generated files as alternative implementations of methods that would otherwise be calls into the Godot engine through the Godot foreign function interface (FFI). Here's an example for `Vector2i`:

```swift
    /// Returns the component-wise minimum of this and `with`, equivalent to `Vector2i(mini(x, with.x), mini(y, with.y))`.
    public func min(with: Vector2i)-> Vector2i {
        #if !CUSTOM_BUILTIN_IMPLEMENTATIONS
        var result: Vector2i = Vector2i()
        withUnsafePointer(to: with) { pArg0 in
            withUnsafePointer(to: UnsafeRawPointersN1(pArg0)) { pArgs in
                pArgs.withMemoryRebound(to: UnsafeRawPointer?.self, capacity: 1) { pArgs in
                    var mutSelfCopy = self
                    withUnsafeMutablePointer (to: &mutSelfCopy) { ptr in
                       Vector2i.method_min(ptr, pArgs, &result, 1)
                    }
                }
                
            }
            
        }
        
        return result
        #else // CUSTOM_BUILTIN_IMPLEMENTATIONS
            do {
                return Vector2i(
                    x: Swift.min(x, with.x),
                    y: Swift.min(y, with.y)
                )
            }
        #endif
    }
```

The code between `#if` and `#else` calls an engine function. The code between `#else` and `#endif` is a hand-written Swift implementation that `Generator` copied from `Vector2i.covers.swift`. We call the hand-written implementation a “cover” for the engine function.

## Editing covers

If you're editing the contents of this folder, you may want to set your IDE to build the `SwiftCovers` library. This should give you syntax highlighting and auto-completion. You shouldn't use the `SwiftCovers` library for anything else.

To add a new cover, write a new method in a file in this folder. The method needs to be an `extension` for the appropriate type, be `public`, and have the same name, argument types, and return types as the function generated by `Generator`.

## Some implementation details

`Generator` copies over an entire method body, including the braces surrounding the method body. This preserves any comments at the start or end of the method body. Undecorated braces normally create a closure in Swift, so `Generator` inserts the `do` keyword in front of the opening brace, which tells Swift to just run the code inside the block instead of creating a closure.

Subscript declarations in Swift can be substantially more complicated than method declarations, because a subscript declaration can have a `get` block, or a `set` block, or both, or just an implicit `get` block. So, for subscripts, `Generator` copies over the entire subscript declaration instead of just the body.
